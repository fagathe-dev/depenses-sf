{% extends "layouts/app.html.twig" %}

{% block content %}
  <!-- start features -->
  <section class="section bg-light">
    <div class="container">
      <div class="row align-items-center gy-4">
          <!-- end col -->
        <div class="col-lg-6 col-sm-7 col-10 ms-auto order-1 order-lg-2">
          <div class="p-3 transferContainer">
            <h1 class="h3 mb-sm-0">Transférer des fichiers</h1>
            {{ form_start(form) }}
              {{ form_row(form.name) }}
              {{ form_row(form.emiter) }}
              <div class="form-group">
                <div class="row justify-content-between mb-1">
                  <div class="col-auto">{{ form_label(form.recepients) }}</div>
                  <div class="col-auto">
                    <button type="button" class="btn btn-soft-success btn-sm" onclick="addRecepient(event);">
                      <i class="ri-add-line"></i>
                    </button>
                  </div>
                </div>
                {{ form_widget(form.recepients) }}
              </div>
              {{ form_row(form.message) }}
              {{ form_row(form.file) }}
              {{ form_rest(form) }}
            {{form_end(form) }}
          </div>
        </div>
        <div class="col-lg-6 order-2 order-lg-1">
          <div class="text-muted">
            <h4 class="mb-3">Bienvenue sur FileTransfer</h4>
            <p class="mb-4 ff-secondary">Transférer vos fichiers : </p>

            <div class="row">
              <div class="col-sm-5">
                <div class="vstack gap-2">
                  <div class="d-flex align-items-center">
                    <div class="flex-shrink-0 me-2">
                      <div class="avatar-xs icon-effect">
                        <div class="avatar-title bg-transparent text-success rounded-circle h2">
                          <i class="ri-check-fill"></i>
                        </div>
                      </div>
                    </div>
                    <div class="flex-grow-1">
                      <h5 class="fs-14 mb-0">Vidéos</h5>
                    </div>
                  </div>
                  <div class="d-flex align-items-center">
                    <div class="flex-shrink-0 me-2">
                      <div class="avatar-xs icon-effect">
                        <div class="avatar-title bg-transparent text-success rounded-circle h2">
                          <i class="ri-check-fill"></i>
                        </div>
                      </div>
                    </div>
                    <div class="flex-grow-1">
                      <h5 class="fs-14 mb-0">Documents</h5>
                    </div>
                  </div>
                  <div class="d-flex align-items-center">
                    <div class="flex-shrink-0 me-2">
                      <div class="avatar-xs icon-effect">
                        <div class="avatar-title bg-transparent text-success rounded-circle h2">
                          <i class="ri-check-fill"></i>
                        </div>
                      </div>
                    </div>
                    <div class="flex-grow-1">
                      <h5 class="fs-14 mb-0">Musiques</h5>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-5">
                  <div class="vstack gap-2">
                      <div class="d-flex align-items-center">
                          <div class="flex-shrink-0 me-2">
                              <div class="avatar-xs icon-effect">
                                  <div class="avatar-title bg-transparent text-success rounded-circle h2">
                                      <i class="ri-check-fill"></i>
                                  </div>
                              </div>
                          </div>
                          <div class="flex-grow-1">
                              <h5 class="fs-14 mb-0">Images</h5>
                          </div>
                      </div>
                      <div class="d-flex align-items-center">
                          <div class="flex-shrink-0 me-2">
                              <div class="avatar-xs icon-effect">
                                  <div class="avatar-title bg-transparent text-success rounded-circle h2">
                                      <i class="ri-check-fill"></i>
                                  </div>
                              </div>
                          </div>
                          <div class="flex-grow-1">
                              <h5 class="fs-14 mb-0">Archives</h5>
                          </div>
                      </div>
                  </div>
              </div>
            </div>

            {# <div class="mt-4">
              <a href="/" class="btn btn-primary">En savoir plus <i class="ri-arrow-right-line align-middle ms-1"></i></a>
            </div>  #}
          </div>
        </div>
      </div>
      <!-- end row -->
    </div>
    <!-- end container -->
  </section>
  <!-- end features -->
{% endblock %}

{% block js %}
  <script>
    const prototypeContainer = document.getElementById('transfer_recepients');
    const container = prototypeContainer.closest('.form-group');
    const addRecepient = (event) => {
      const count = parseInt(container.querySelectorAll('.email-box').length);
      const prototype = prototypeContainer.dataset.prototype;
      const html = prototype.replace(/__name__/g, count);
      
      return prototypeContainer.insertAdjacentHTML('beforeend', html);
    }

    function copyLink(event) {
      // Get the text field
      const copyText = document.querySelector(event.target.dataset.copyElement);

      // Select the text field
      copyText.select();
      copyText.setSelectionRange(0, 99999); // For mobile devices

      // Copy the text inside the text field
      navigator.clipboard.writeText(copyText.value);
    }
  </script>
{% endblock %}